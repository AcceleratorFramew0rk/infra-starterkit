#!/bin/bash

# Execute the provided code
PREFIX=$(yq -r '.prefix' /tf/avm/templates/landingzone/configuration/0-launchpad/scripts/config.yaml)
RG_NAME="${PREFIX}-rg-launchpad"
STG_NAME=$(az storage account list --resource-group "$RG_NAME" --query "[?contains(name, '${PREFIX//-/}stgtfstate')].[name]" -o tsv 2>/dev/null | head -n 1)
echo "{\"storage_account_name\": \"$STG_NAME\", \"resource_group_name\": \"$RG_NAME\"}"

